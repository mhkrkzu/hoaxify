import * as React from "react";import {useState} from "react";import Input from "../components/Input";import Form from "reactstrap/es/Form";import {useTranslation} from "react-i18next";import ButtonWithProgress from "../components/ButtonWithProgress";import {useApiProgress} from "../shared/ApiProgress";import {signupHandler} from "../redux/AuthActions";import {useDispatch} from "react-redux";const UserSignupPage = props => {    const [form, setForm] = useState({username: null, displayName: null, password: null, passwordRepeat: null});    const [errors, setErrors] = useState({});    const dispatch = useDispatch();    const onChange = event => {        const {name, value} = event.target;        setErrors((previousErrors) => ({...previousErrors, [name]: undefined}));        setForm((previousForm) => ({...previousForm, [name]: value}));    };    const onClickSignup = async event => {        const {history} = props        const {push} = history;        event.preventDefault();        const {username, password, displayName} = form;        const body = {            username,            displayName,            password        };        try {            await dispatch(signupHandler(body));            push('/');        } catch (error) {            if (error.response.data.validationErrors) {                setErrors(error.response.data.validationErrors)            }        }    };    const {t} = useTranslation();    const {username: usernameError, displayName: displayNameError, password: passwordError} = errors;    const pendingApiCallSignup = useApiProgress('post', '/api/1.0/users');    const pendingApiCallLogin = useApiProgress('post', '/api/1.0/auth');    const pendingApiCall = pendingApiCallSignup || pendingApiCallLogin;    let passwordRepeatError;    if (form.password !== form.passwordRepeat) {        passwordRepeatError = t("password mismatch");    }    return (        <div className="container">            <div className="row">                <div className="col-md-4"></div>                <div className="col-md-4 mt-5">                    <h1 className="text-center">{t('Sign Up')}</h1>                    <Form>                        <Input name="username" label={t("Username")} error={usernameError} onChange={onChange}                               placeholder={t("Username")}/>                        <Input name="displayName" label={t("Display Name")} error={displayNameError}                               onChange={onChange}                               placeholder={t("Display Name")}/>                        <Input name="password" label={t("Password")} error={passwordError} onChange={onChange}                               type="password" placeholder={t("Password")}/>                        <Input name="passwordRepeat" type="password" error={passwordRepeatError} onChange={onChange}                               label={t("Password Repeat")} placeholder={t("Password Repeat")}/>                        <div className="text-center">                            <ButtonWithProgress onClick={onClickSignup} color="success"                                                disabled={pendingApiCall || passwordRepeatError !== undefined}                                                pendingApiCall={pendingApiCall} text={t("Sign Up")}/>                        </div>                    </Form>                </div>                <div className="col-md-4"></div>            </div>        </div>    )}export default UserSignupPage;